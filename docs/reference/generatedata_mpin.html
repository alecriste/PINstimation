<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Generates a dataset object or a data.series object (a list
of dataset objects) storing simulation parameters as well as aggregate
daily buys and sells simulated following the assumption of the MPIN model
of (Ersan 2016)
."><title>Simulation of MPIN model data — generatedata_mpin • PINstimation</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Open%20Sans-0.4.1/font.css" rel="stylesheet"><link href="../deps/_IBM%20Plex%20Mono-0.4.1/font.css" rel="stylesheet"><link href="../deps/_Roboto%20Slab-0.4.1/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Simulation of MPIN model data — generatedata_mpin"><meta property="og:description" content="Generates a dataset object or a data.series object (a list
of dataset objects) storing simulation parameters as well as aggregate
daily buys and sells simulated following the assumption of the MPIN model
of (Ersan 2016)
."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0SVLS0LDBY"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0SVLS0LDBY');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PINstimation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/PINstimation.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../research.html" aria-label="Research">Research</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/parallel_processing.html">Parallel Processing</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../package-authors.html" aria-label="Authors">Authors</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/monty-se/">
    <span class="fa fa-github"></span>
     
    Github
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Simulation of MPIN model data</h1>
      <small class="dont-index">Source: <a href="https://github.com/monty-se/PINstimation/blob/HEAD/R/data_simulation.R" class="external-link"><code>R/data_simulation.R</code></a></small>
      <div class="d-none name"><code>generatedata_mpin.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates a <code>dataset</code> object or a <code>data.series</code> object (a list
of <code>dataset</code> objects) storing simulation parameters as well as aggregate
daily buys and sells simulated following the assumption of the <code>MPIN</code> model
of (Ersan 2016)
.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">generatedata_mpin</span><span class="op">(</span>series <span class="op">=</span> <span class="fl">1</span>, days <span class="op">=</span> <span class="fl">60</span>, layers <span class="op">=</span> <span class="cn">NULL</span>,
                         parameters <span class="op">=</span> <span class="cn">NULL</span>, ranges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>, <span class="va">...</span>,
                         verbose <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>series</dt>
<dd><p>The number of datasets to generate.</p></dd>
<dt>days</dt>
<dd><p>The number of trading days for which aggregated buys and
sells are generated. Default value is <code>60</code>.</p></dd>
<dt>layers</dt>
<dd><p>The number of information layers to be included in the
simulated data. Default value is <code>NULL</code>.
If <code>layers</code> is omitted or set to <code>NULL</code>, the number of layers is uniformly
selected from the set <code>{1, ..., maxlayers}</code>.</p></dd>
<dt>parameters</dt>
<dd><p>A vector of model parameters of size <code>3J+2</code>
where <code>J</code> is the number of information layers and it has the
following form
{\(\alpha\)<sub>1</sub>,
...,\(\alpha\)<sub>J</sub>,
\(\delta\)<sub>1</sub>,...,
\(\delta\)<sub>J</sub>,
\(\mu\)<sub>1</sub>,...,
\(\mu\)<sub>J</sub>, \(\epsilon\)<sub>b</sub>, \(\epsilon\)<sub>s</sub>}.</p></dd>
<dt>ranges</dt>
<dd><p>A list of ranges for the different simulation
parameters having named elements \(\alpha\), \(\delta\), \(\epsilon\)<sub>b</sub>, \(\epsilon\)<sub>s</sub>,
and \(\mu\).
The value of each element is a vector of two numbers: the first one is the
minimal value <code>min_v</code> and the second one is the maximal value <code>max_v</code>.
If the element corresponding to a given parameter is missing, the default
range for that parameter is used. If the argument <code>ranges</code> is an empty
list and <code>parameters</code> is <code>NULL</code>, the default ranges for the parameters
are used. The simulation parameters are uniformly drawn from the interval
(<code>min_v</code>, <code>max_v</code>) for the specified parameters.
The default value is <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>.</p></dd>
<dt>...</dt>
<dd><p>Additional arguments passed on to the function
<code>generatedata_mpin()</code>. The recognized arguments are <code>confidence</code>,
<code>maxlayers</code>, <code>eps_ratio</code>, <code>mu_ratio</code>.</p><ul><li><p><code>confidence</code> (<code>numeric</code>) denotes the range of the confidence interval
associated with each layer such that all observations within the layer <code>j</code>
lie in the theoretical confidence interval of the Skellam distribution
centered on the mean order imbalance, at the level <code>'confidence'</code>.
The default value is <code>0.99</code>.</p></li>
<li><p><code>maxlayers</code> (<code>integer</code>) denotes the upper limit of number of layers
for the generated datasets. If the argument <code>layers</code> is missing, the layers
of the simulated datasets will be uniformly drawn from
<code>{1,..., maxlayers}</code>. When missing, <code>maxlayers</code> takes the default
value of <code>5</code>.</p></li>
<li><p><code>eps_ratio</code> (<code>numeric</code>) specifies the admissible range for the value
of the ratio \(\epsilon\)<sub>s</sub>/\(\epsilon\)<sub>b</sub>, It can be a two-value vector or just a single value.
If <code>eps_ratio</code> is a vector of two values: the first one is the minimal value
and the second one is the maximal value; and the function tries to generate
\(\epsilon\)<sub>s</sub> and \(\epsilon\)<sub>b</sub> satisfying that their ratios \(\epsilon\)<sub>s</sub>/\(\epsilon\)<sub>b</sub> lies within the interval
<code>eps_ratio</code>. If <code>eps_ratio</code> is a single number, then the function tries to
generate \(\epsilon\)<sub>s</sub> and \(\epsilon\)<sub>b</sub> satisfying \(\epsilon\)<sub>s</sub> = \(\epsilon\)<sub>b</sub> x <code>eps_ratio</code>. If this range
conflicts with other arguments such as <code>ranges</code>, a warning is displayed.
The default value is <code>c(0.75, 1.25)</code>.</p></li>
<li><p><code>mu_ratio</code> (<code>numeric</code>) it is the minimal value of the ratio between
two consecutive values of the vector <code>mu</code>. If <code>mu_ratio = 1.25</code> e.g., then
\(\mu\)<sub>j+1</sub> should be larger than
<code>1.25</code>* \(\mu\)<sub>j</sub> for all
<code>j = 1, .., J</code>. If <code>mu_ratio</code> conflicts with other arguments such as <code>ranges</code>
or <code>confidence</code>, a warning is displayed. The default value is <code>NULL</code>.</p></li>
</ul></dd>
<dt>verbose</dt>
<dd><p>(<code>logical</code>) a binary variable that determines whether detailed
information about the progress of the data generation is displayed.
No output is produced when <code>verbose</code> is set to <code>FALSE</code>. The default
value is <code>TRUE</code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns an object of class <code>dataset</code> if <code>series=1</code>, and an
object of class <code>data.series</code> if <code>series&gt;1</code>.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>An information layer refers to a given type of information event existing
in the data. The <code>PIN</code> model assumes a single type of information events
characterized by three parameters for \(\alpha\), \(\delta\), and
\(\mu\). The <code>MPIN</code> model relaxes the assumption, by relinquishing the
restriction on the number of information event types. When <code>layers = 1</code>,
generated data fit the assumptions of the <code>PIN</code> model.</p>
<p>If the argument <code>parameters</code> is missing, then the simulation parameters are
generated using the ranges specified in the argument <code>ranges</code>.
If the argument <code>ranges</code> is <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code>, default ranges are used. Using the
default ranges, the simulation parameters are obtained using the following
procedure:</p><ul><li><p>\(\alpha()\): a vector of length <code>layers</code>, where each
\(\alpha\)<sub>j</sub> is uniformly
distributed on <code>(0, 1)</code> subject to the condition:
\(\sum \alpha\)<sub>j</sub>\(&lt; 1\).</p></li>
<li><p>\(\delta()\): a vector of length <code>layers</code>, where each
\(\delta\)<sub>j</sub> uniformly distributed
on <code>(0, 1)</code>.</p></li>
<li><p>\(\mu()\): a vector of length <code>layers</code>, where each
\(\mu\)<sub>j</sub> is uniformly distributed
on the interval <code>(0.5 max(</code>\(\epsilon\)<sub>b</sub><code>,</code> \(\epsilon\)<sub>s</sub><code>), 5 max(</code>\(\epsilon\)<sub>b</sub><code>,</code> \(\epsilon\)<sub>s</sub><code>))</code>.
The \(\mu\):s are then sorted so the excess trading increases in the
information layers, subject to the condition that the ratio of two
consecutive \(\mu\)'s should be at least <code>1.25</code>.</p></li>
<li><p>\(\epsilon\)<sub>b</sub>: an integer drawn uniformly from the interval <code>(100, 10000)</code>
with step <code>50</code>.</p></li>
<li><p>\(\epsilon\)<sub>s</sub>: an integer uniformly drawn from (<code>(3/4)</code>\(\epsilon\)<sub>b</sub>, <code>(5/4)</code>\(\epsilon\)<sub>b</sub>) with step
<code>50</code>.</p></li>
</ul><p>Based on the simulation parameters <code>parameters</code>, daily buys and sells are
generated by the assumption that buys and sells
follow Poisson distributions with mean parameters (\(\epsilon\)<sub>b</sub>, \(\epsilon\)<sub>s</sub>) on days with no
information; with mean parameters
(\(\epsilon\)<sub>b</sub> + \(\mu\)<sub>j</sub>, \(\epsilon\)<sub>s</sub>) on days
with good information of layer \(j\) and
(\(\epsilon\)<sub>b</sub>, \(\epsilon\)<sub>s</sub> + \(\mu\)<sub>j</sub>) on days
with bad information of layer \(j\).</p>
<p><strong>Considerations for the ranges of simulation parameters:</strong> While
<code>generatedata_mpin()</code> function enables the user to simulate data series
with any set of theoretical parameters,
we strongly recommend the use of parameter sets satisfying below conditions
which are in line with the nature of empirical data and the theoretical
models used within this package.
When parameter values are not assigned by the user, the function, by default,
simulates data series that are in line with these criteria.</p><ul><li><p><em>Consideration 1</em>: any \(\mu\)'s value separable from \(\epsilon\)<sub>b</sub> and \(\epsilon\)<sub>s</sub>
values, as well as other \(\mu\) values. Otherwise, the <code>PIN</code> and <code>MPIN</code>
estimation would not yield expected results.<br>
[x] Sharp example.1: \(\epsilon\)<sub>b</sub>\( = 1000\); \(\mu = 1\). In this case, no
information layer can be captured in a healthy way by the use of the models
which relies on Poisson distributions.<br>
[x] Sharp example.2: \(\epsilon\)<sub>s</sub>\( = 1000\),
\(\mu\)<sub>1</sub>\( = 1000\),
and \(\mu\)<sub>2</sub>\( = 1001\).
Similarly, no distinction can be
made on the two simulated layers of informed trading. In real life, this
entails that there is only one type of information which would also be the
estimate of the <code>MPIN</code> model. However, in the simulated data properties,
there would be 2 layers which will lead the user to make a wrong
evaluation of model performance.</p></li>
<li><p><em>Consideration 2</em>: \(\epsilon\)<sub>b</sub> and \(\epsilon\)<sub>s</sub> being relatively close to each other.
When they are far from each other, that would indicate that there is
substantial asymmetry between buyer and seller initiated trades, being a
strong signal for informed trading.
There is no theoretical evidence to indicate that the uninformed trading in
buy and sell sides deviate much from each other in real life.
Besides, numerous papers that work with <code>PIN</code> model provide close to
each other uninformed intensities.
when no parameter values are assigned by the user, the function generates
data with the condition of sell side uninformed trading to be in the range of
<code>(4/5):=80%</code> and <code>(6/5):=120%</code> of buy side uninformed rate.<br>
[x] Sharp example.3: \(\epsilon\)<sub>b</sub>\( = 1000\), \(\epsilon\)<sub>s</sub>\( = 10000\). In this
case, the <code>PIN</code> and <code>MPIN</code> models would tend to consider some of the trading
in sell side to be informed (which should be the actual case).
Again, the estimation results would deviate much from the simulation
parameters being a good news by itself but a misleading factor in model
evaluation.
See for example Cheng and Lai (2021)
 as a
misinterpretation of comparative performances. The paper's findings highly
rely on the simulations with extremely different \(\epsilon\)<sub>b</sub> and \(\epsilon\)<sub>s</sub> values
(813-8124 pair and 8126-812).</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Cheng T, Lai H (2021).
“Improvements in estimating the probability of informed trading models.”
<em>Quantitative Finance</em>, <b>21</b>(5), 771-796.<br><br> Ersan O (2016).
“Multilayer Probability of Informed Trading.”
<em>Available at SSRN 2874420</em>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># ------------------------------------------------------------------------ #</span></span>
<span class="r-in"><span class="co"># There are different scenarios of using the function generatedata_mpin()  #</span></span>
<span class="r-in"><span class="co"># ------------------------------------------------------------------------ #</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># With no arguments, the function generates one dataset object spanning</span></span>
<span class="r-in"><span class="co"># 60 days, containing a number of information layers uniformly selected</span></span>
<span class="r-in"><span class="co"># from `{1, 2, 3, 4, 5}`, and where the parameters are chosen as</span></span>
<span class="r-in"><span class="co"># described in the details.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">sdata</span> <span class="op">&lt;-</span> <span class="fu">generatedata_mpin</span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The number of layers can be deduced from the simulation parameters, if</span></span>
<span class="r-in"><span class="co"># fed directly to the function generatedata_mpin() through the argument</span></span>
<span class="r-in"><span class="co"># 'parameters'. In this case, the output is a dataset object with one</span></span>
<span class="r-in"><span class="co"># information layer.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">givenpoint</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.1</span>, <span class="fl">800</span>, <span class="fl">300</span>, <span class="fl">200</span><span class="op">)</span></span>
<span class="r-in"><span class="va">sdata</span> <span class="op">&lt;-</span> <span class="fu">generatedata_mpin</span><span class="op">(</span>parameters <span class="op">=</span> <span class="va">givenpoint</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The number of layers can alternatively be set directly through the</span></span>
<span class="r-in"><span class="co"># argument 'layers'.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">sdata</span> <span class="op">&lt;-</span> <span class="fu">generatedata_mpin</span><span class="op">(</span>layers <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The simulation parameters can be randomly drawn from their corresponding</span></span>
<span class="r-in"><span class="co"># ranges fed through the argument 'ranges'.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">sdata</span> <span class="op">&lt;-</span> <span class="fu">generatedata_mpin</span><span class="op">(</span>ranges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.1</span>, <span class="fl">0.7</span><span class="op">)</span>,</span>
<span class="r-in">                                        delta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.7</span><span class="op">)</span>,</span>
<span class="r-in">                                        mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">3000</span>, <span class="fl">5000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The value of a given simulation parameter can be set to a specific value by</span></span>
<span class="r-in"><span class="co"># setting the range of the desired parameter takes a unique value, instead of</span></span>
<span class="r-in"><span class="co"># a pair of values.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">sdata</span> <span class="op">&lt;-</span> <span class="fu">generatedata_mpin</span><span class="op">(</span>ranges <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.4</span>, delta <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.2</span>, <span class="fl">0.7</span><span class="op">)</span>,</span>
<span class="r-in">                                        eps.b <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">100</span>, <span class="fl">7000</span><span class="op">)</span>,</span>
<span class="r-in">                                        mu <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">8000</span>, <span class="fl">12000</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">[Warning] The maximum layers possible given that alpha &gt;= 0.4 is: 2.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># If both arguments 'parameters', and 'layers' are simultaneously provided,</span></span>
<span class="r-in"><span class="co"># and the number of layers detected from the length of the argument</span></span>
<span class="r-in"><span class="co"># 'parameters' is different from the argument 'layers', the former is used</span></span>
<span class="r-in"><span class="co"># and a warning is displayed.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">sim.params</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0.4</span>, <span class="fl">0.2</span>, <span class="fl">0.9</span>, <span class="fl">0.1</span>, <span class="fl">400</span>, <span class="fl">700</span>, <span class="fl">300</span>, <span class="fl">200</span><span class="op">)</span></span>
<span class="r-in"><span class="va">sdata</span> <span class="op">&lt;-</span> <span class="fu">generatedata_mpin</span><span class="op">(</span>days <span class="op">=</span> <span class="fl">120</span>, layers <span class="op">=</span> <span class="fl">3</span>, parameters <span class="op">=</span> <span class="va">sim.params</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">[Warning]</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">The number of layers derived from 'parameters' is not compatible with 'layers'.</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">The argument 'layers' will be ignored</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Display the details of the generated data</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">show</span><span class="op">(</span><span class="va">sdata</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Data series successfully generated</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Simulation model 	: MPIN model</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of layers	: 2 layer(s)</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Number of trading days	: 120 days</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----------------------------------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Type object@data to get the simulated data</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BBBBBB; background-color: #000000;"> Data simulation </span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ===========  ==============  ==================  =============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Variables    Theoretical.    Empirical.          Aggregates.  </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ===========  ==============  ==================  =============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> alpha        0.4, 0.2        0.391667, 0.233333  0.625        </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> delta        0.9, 0.1        0.914894, 0.071429  0.6          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mu           400, 700        399.49, 691.68      508.57       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> eps.b        300             298.67              298.67       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> eps.s        200             198.27              198.27       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ----                                                          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Likelihood   -               (1168.38)           (1168.38)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> mpin         -               0.39011             0.39011      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ===========  ==============  ==================  =============</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> -------</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Running time: 0.004 seconds</span>
<span class="r-in"><span class="co"># \donttest{</span></span>
<span class="r-in"><span class="co"># ------------------------------------------------------------------------ #</span></span>
<span class="r-in"><span class="co"># Use generatedata_mpin() to compare the accuracy of estimation methods    #</span></span>
<span class="r-in"><span class="co"># ------------------------------------------------------------------------ #</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The example below illustrates the use of the function 'generatedata_mpin()'</span></span>
<span class="r-in"><span class="co"># to compare the accuracy of the functions 'mpin_ml()', and 'mpin_ecm()'.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># The example will depend on three variables:</span></span>
<span class="r-in"><span class="co"># n: the number of datasets used</span></span>
<span class="r-in"><span class="co"># l: the number of layers in each simulated datasets</span></span>
<span class="r-in"><span class="co"># xc : the number of extra clusters used in initials_mpin</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># For consideration of speed, we will set n = 2, l = 2, and xc = 2</span></span>
<span class="r-in"><span class="co"># These numbers can change to fit the user's preferences</span></span>
<span class="r-in"><span class="va">n</span> <span class="op">&lt;-</span> <span class="va">l</span> <span class="op">&lt;-</span> <span class="va">xc</span> <span class="op">&lt;-</span> <span class="fl">2</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># We start by generating n datasets simulated according to the</span></span>
<span class="r-in"><span class="co"># assumptions of the MPIN model.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">dataseries</span> <span class="op">&lt;-</span> <span class="fu">generatedata_mpin</span><span class="op">(</span>series <span class="op">=</span> <span class="va">n</span>, layers <span class="op">=</span> <span class="va">l</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Store the estimates in two different lists: 'mllist', and 'ecmlist'</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">mllist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">dataseries</span><span class="op">@</span><span class="va">datasets</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-in">  <span class="fu"><a href="mpin_ml.html">mpin_ml</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">data</span>, xtraclusters <span class="op">=</span> <span class="va">xc</span>, layers <span class="op">=</span> <span class="va">l</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ecmlist</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">lapply</a></span><span class="op">(</span><span class="va">dataseries</span><span class="op">@</span><span class="va">datasets</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span>
<span class="r-in">  <span class="fu"><a href="mpin_ecm.html">mpin_ecm</a></span><span class="op">(</span><span class="va">x</span><span class="op">@</span><span class="va">data</span>, xtraclusters <span class="op">=</span> <span class="va">xc</span>, layers <span class="op">=</span> <span class="va">l</span>, verbose <span class="op">=</span> <span class="cn">FALSE</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># For each estimate, we calculate the absolute difference between the</span></span>
<span class="r-in"><span class="co"># estimated mpin, and empirical mpin computed using dataset parameters.</span></span>
<span class="r-in"><span class="co"># The absolute differences are stored in 'mldmpin' ('ecmdpin') for the</span></span>
<span class="r-in"><span class="co"># ML (ECM) method,</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">mldpin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span>,</span>
<span class="r-in"> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">mllist</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">mpin</span> <span class="op">-</span> <span class="va">dataseries</span><span class="op">@</span><span class="va">datasets</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">emp.pin</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">ecmdpin</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="va">n</span>,</span>
<span class="r-in"> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">abs</a></span><span class="op">(</span><span class="va">ecmlist</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">mpin</span> <span class="op">-</span> <span class="va">dataseries</span><span class="op">@</span><span class="va">datasets</span><span class="op">[[</span><span class="va">x</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">emp.pin</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Similarly, we obtain vectors of running times for both estimation methods.</span></span>
<span class="r-in"><span class="co"># They are stored in 'mltime' ('ecmtime') for the ML (ECM) method.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">mltime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">mllist</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">@</span><span class="va">runningtime</span><span class="op">)</span></span>
<span class="r-in"><span class="va">ecmtime</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span><span class="va">ecmlist</span>, <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="va">x</span><span class="op">@</span><span class="va">runningtime</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Finally, we calculate the average absolute deviation from empirical PIN</span></span>
<span class="r-in"><span class="co"># as well as the average running time for both methods. This allows us to</span></span>
<span class="r-in"><span class="co"># compare them in terms of accuracy, and speed.</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">accuracy</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">mldpin</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ecmdpin</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">timing</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">mltime</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="va">ecmtime</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="va">comparison</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html" class="external-link">as.data.frame</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">rbind</a></span><span class="op">(</span><span class="va">accuracy</span>, <span class="va">timing</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">colnames</a></span><span class="op">(</span><span class="va">comparison</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ML"</span>, <span class="st">"ECM"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">comparison</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Accuracy"</span>, <span class="st">"Timing"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">show</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">round</a></span><span class="op">(</span><span class="va">comparison</span>, <span class="fl">6</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                ML     ECM</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Accuracy 0.000127 0.00013</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Timing   4.888500 0.09750</span>
<span class="r-in"><span class="co"># }</span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="package-authors.html">Montasser Ghachem</a>, <a href="package-authors.html">Oguz Ersan</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

