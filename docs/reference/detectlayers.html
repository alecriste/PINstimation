<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Detects the number of information layers present in trade-data
using the algorithms in Ersan (2016)
,
Ersan and Ghachem (2022a)
,
and Ghachem and Ersan (2022a)
."><title>Layer detection in trade-data — detectlayers • PINstimation</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.1.0/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.1.0/bootstrap.bundle.min.js"></script><link href="../deps/_Open%20Sans-0.4.1/font.css" rel="stylesheet"><link href="../deps/_IBM%20Plex%20Mono-0.4.1/font.css" rel="stylesheet"><link href="../deps/_Roboto%20Slab-0.4.1/font.css" rel="stylesheet"><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.rawgit.com/afeld/bootstrap-toc/v1.0.1/dist/bootstrap-toc.min.js"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Layer detection in trade-data — detectlayers"><meta property="og:description" content="Detects the number of information layers present in trade-data
using the algorithms in Ersan (2016)
,
Ersan and Ghachem (2022a)
,
and Ghachem and Ersan (2022a)
."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-0SVLS0LDBY"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0SVLS0LDBY');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">PINstimation</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/PINstimation.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../research.html" aria-label="Research">Research</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/parallel_processing.html">PINstimation - Parallel Processing</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../package-authors.html" aria-label="Authors">Authors</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/monty-se/">
    <span class="fa fa-github"></span>
     
    Github
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Layer detection in trade-data</h1>
      <small class="dont-index">Source: <a href="https://github.com/monty-se/PINstimation/blob/HEAD/R/model_mpin.layers.R" class="external-link"><code>R/model_mpin.layers.R</code></a></small>
      <div class="d-none name"><code>detectlayers.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Detects the number of information layers present in trade-data
using the algorithms in Ersan (2016)
,
Ersan and Ghachem (2022a)
,
and Ghachem and Ersan (2022a)
.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">detectlayers_e</span><span class="op">(</span><span class="va">data</span>, confidence <span class="op">=</span> <span class="fl">0.995</span>, correction <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>

<span class="fu">detectlayers_eg</span><span class="op">(</span><span class="va">data</span>, confidence <span class="op">=</span> <span class="fl">0.995</span><span class="op">)</span>

<span class="fu">detectlayers_ecm</span><span class="op">(</span><span class="va">data</span>, hyperparams <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>data</dt>
<dd><p>A dataframe with 2 variables: the first
corresponds to buyer-initiated trades (buys), and the second corresponds
to seller-initiated trades (sells).</p></dd>
<dt>confidence</dt>
<dd><p>A number from <code>(0.5,1)</code>, corresponding to the
range of the confidence interval used to determine whether a given cluster is
compact, and therefore can be considered an information layer.
If all values of absolute order imbalances (AOI) within a given cluster are
within the confidence interval of a Skellam distribution with level equal to
<code>'confidence'</code>, and centered on the mean of AOI, then the cluster is considered
compact, and, therefore, an information layer. If some observations
are outside the confidence interval, then the data is clustered further. The
default value is <code>0.995</code>. <code>[i]</code> This is an argument of the functions
<code>detectlayers_e()</code>, and <code>detectlayers_eg()</code>.</p></dd>
<dt>correction</dt>
<dd><p>A binary variable that determines whether the
data will be adjusted prior to implementing the algorithm of
Ersan (2016)
. The default value is <code>TRUE</code>.</p></dd>
<dt>hyperparams</dt>
<dd><p>A list containing the hyperparameters of the <code>ECM</code>
algorithm. When not empty, it contains one or more of the following
elements: <code>maxeval</code>, <code>tolerance</code>, <code>maxinit</code>, and <code>maxlayers</code>. More
about these elements are found in the Details section. <code>[i]</code> This is
an argument of the function <code>detectlayers_ecm()</code>.</p></dd>
</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Returns an integer corresponding to the number of layers detected in
the data.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>The argument 'data' should be a numeric dataframe, and contain
at least two variables. Only the first two variables will be considered:
The first variable is assumed to correspond to the total number of
buyer-initiated trades, while the second variable is assumed to
correspond to the total number of seller-initiated trades. Each row or
observation correspond to a trading day. <code>NA</code> values will be ignored.</p>
<p>The argument <code>hyperparams</code>  contains the hyperparameters of the <code>ECM</code>
algorithm. It is either empty or contains one or more of the following
elements:</p><ul><li><p><code>maxeval</code>: (<code>integer</code>) It stands for maximum number of iterations
of the <code>ECM</code>  for each initial parameter set. When missing, <code>maxeval</code>
takes the default value of <code>100</code>.</p></li>
<li><p><code>tolerance</code> (<code>numeric</code>) The <code>ECM</code> algorithm is stopped when the
(relative) change of log-likelihood is smaller than tolerance. When
missing, <code>tolerance</code> takes the default value of <code>0.001</code>.</p></li>
<li><p><code>maxinit</code>: (<code>integer</code>) It is the maximum number of initial
parameter sets used for the <code>ECM</code> estimation per layer. When missing,
<code>maxinit</code> takes the default value of <code>20</code>.</p></li>
<li><p><code>maxlayers</code> (<code>integer</code>) It is the upper limit of number of layers
used in the ECM algorithm. To find the optimal number of layers, the ECM
algorithm will estimate a model for each value of the number of layers
between <code>1</code> and <code>maxlayers</code>, and then picks the model that has the lowest
Bayes information criterion (BIC). When missing, <code>maxlayers</code> takes the
default value of <code>8</code>.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    <p>Ersan O (2016).
“Multilayer Probability of Informed Trading.”
<em>Available at SSRN 2874420</em>.<br><br> Ersan O, Ghachem M (2022a).
“Identifying information types in probability of informed trading (PIN) models: An improved algorithm.”
<em>Available at SSRN 4117956</em>.<br><br> Ghachem M, Ersan O (2022a).
“Estimation of the probability of informed trading models via an expectation-conditional maximization algorithm.”
<em>Available at SSRN 4117952</em>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="co"># There is a preloaded quarterly dataset called 'dailytrades' with 60</span></span>
<span class="r-in"><span class="co"># observations. Each observation corresponds to a day and contains the</span></span>
<span class="r-in"><span class="co"># total number of buyer-initiated trades ('B') and seller-initiated</span></span>
<span class="r-in"><span class="co"># trades ('S') on that day. To know more, type ?dailytrades</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">xdata</span> <span class="op">&lt;-</span> <span class="va">dailytrades</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Detect the number of layers present in the dataset 'dailytrades' using the</span></span>
<span class="r-in"><span class="co"># different algorithms and display the results</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">e.layers</span> <span class="op">&lt;-</span> <span class="fu">detectlayers_e</span><span class="op">(</span><span class="va">xdata</span><span class="op">)</span></span>
<span class="r-in"><span class="va">eg.layers</span> <span class="op">&lt;-</span> <span class="fu">detectlayers_eg</span><span class="op">(</span><span class="va">xdata</span><span class="op">)</span></span>
<span class="r-in"><span class="va">em.layers</span> <span class="op">&lt;-</span> <span class="fu">detectlayers_ecm</span><span class="op">(</span><span class="va">xdata</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">show</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>e <span class="op">=</span> <span class="va">e.layers</span>, eg <span class="op">=</span> <span class="va">eg.layers</span>, em <span class="op">=</span> <span class="va">em.layers</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  e eg em </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  3  3  3 </span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by <a href="package-authors.html">Montasser Ghachem</a>, <a href="package-authors.html">Oguz Ersan</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

    </footer></div>

  

  

  </body></html>

